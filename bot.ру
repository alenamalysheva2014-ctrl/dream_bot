import os
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, ContextTypes

TOKEN = os.getenv("BOT_TOKEN")

VIDEO1 = "VIDEO1_FILE_ID"
VIDEO2 = "VIDEO2_FILE_ID"
VIDEO3 = "VIDEO3_FILE_ID"

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("–ì–æ—Ç–æ–≤(–∞) –∫ –ø–µ—Ä–≤–æ–º—É –≤–∏–¥–µ–æ ‚ñ∂Ô∏è", callback_data="video1")]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç üíú\n–ü–æ—Å–º–æ—Ç—Ä–∏ –ø–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ –∏ –Ω–∞–ø–∏—à–∏, —á—Ç–æ —Ç—ã –ø–æ–Ω—è–ª(–∞).",
        reply_markup=reply_markup
    )

async def button(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()

    if query.data == "video1":
        await query.message.reply_video(VIDEO1)
        keyboard = [
            [InlineKeyboardButton("–ì–æ—Ç–æ–≤(–∞) –∫–æ –≤—Ç–æ—Ä–æ–º—É –≤–∏–¥–µ–æ ‚ñ∂Ô∏è", callback_data="video2")]
        ]
        await query.message.reply_text(
            "–ö–∞–∫ —Ç–µ–±–µ –ø–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ? –ú–æ–∂–µ—à—å –Ω–∞–ø–∏—Å–∞—Ç—å –ø–∞—Ä—É —Å–ª–æ–≤.\n–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤(–∞) ‚Äî –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ üëá",
            reply_markup=InlineKeyboardMarkup(keyboard)
        )

    elif query.data == "video2":
        await query.message.reply_video(VIDEO2)
        keyboard = [
            [InlineKeyboardButton("–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å üéÅ", callback_data="video3")]
        ]
        await query.message.reply_text(
            "–ö–ª–∞—Å—Å ‚ú® –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –Ω–∞–ø–∏—à–∏, —á—Ç–æ —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª–æ—Å—å.\n–ê –Ω–∏–∂–µ —Ç–µ–±—è –∂–¥—ë—Ç –±–æ–Ω—É—Å üëá",
            reply_markup=InlineKeyboardMarkup(keyboard)
        )

    elif query.data == "video3":
        await query.message.reply_video(VIDEO3)
        await query.message.reply_text(
            "–í–æ—Ç —Ç–≤–æ–π –±–æ–Ω—É—Å üéÅ\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø—Ä–æ—à—ë–ª(–ª–∞) –ø—É—Ç—å –≤–º–µ—Å—Ç–µ —Å–æ –º–Ω–æ–π üíú"
        )

def main():
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CallbackQueryHandler(button))

    app.run_polling()

if __name__ == "__main__":
    main()
