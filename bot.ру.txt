import os
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, CallbackQueryHandler, filters, ContextTypes

TOKEN = os.getenv("BOT_TOKEN")  # –º—ã –≤—Å—Ç–∞–≤–∏–º —Ç–æ–∫–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ö–æ—Å—Ç–∏–Ω–≥–∞

VIDEO1 = "VIDEO1_FILE_ID"
VIDEO2 = "VIDEO2_FILE_ID"
VIDEO3 = "VIDEO3_FILE_ID"

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [[InlineKeyboardButton("–ì–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É ‚ñ∂Ô∏è", callback_data="next1")]]
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç üíú\n–ü–æ—Å–º–æ—Ç—Ä–∏ —ç—Ç–æ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ.\n–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤(–∞), –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ."
    )
    await update.message.reply_video(VIDEO1, reply_markup=InlineKeyboardMarkup(keyboard))

async def next1(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    keyboard = [[InlineKeyboardButton("–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å üéÅ", callback_data="next2")]]
    await query.message.reply_text(
        "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–µ–ª(–∞)!\n–ú–æ–∂–µ—à—å –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—Å–∞—Ç—å ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤(–∞) –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–∏–¥–µ–æ."
    )
    await query.message.reply_video(VIDEO2, reply_markup=InlineKeyboardMarkup(keyboard))

async def next2(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    await query.message.reply_text(
        "–≠—Ç–æ –±–æ–Ω—É—Å-—Å–∫–∞–∑–∫–∞ ‚ú®\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–∂–µ—à—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è, —á—Ç–æ —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª–æ—Å—å, –Ω–æ —è –Ω–µ –æ—Ç–≤–µ—á–∞—é –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.\n–°–ø–∞—Å–∏–±–æ üíú"
    )
    await query.message.reply_video(VIDEO3)

async def any_text(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç üíú\n–Ø –Ω–µ —á–∏—Ç–∞—é —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –Ω–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å."
    )

app = ApplicationBuilder().token(TOKEN).build()
app.add_handler(CommandHandler("start", start))
app.add_handler(CallbackQueryHandler(next1, pattern="next1"))
app.add_handler(CallbackQueryHandler(next2, pattern="next2"))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, any_text))

if __name__ == "__main__":
    app.run_polling()